#!/usr/bin/env python3
# -*- coding: utf-8 -*-

"""
variables.py - Модуль с глобальными переменными и настройками

Этот модуль содержит все глобальные константы и настройки, необходимые для работы
всего приложения: параметры отображения, настройки калибровки, детекции, пути к файлам
и другие важные переменные.
"""

import os

# Базовая директория проекта
BASE_DIR = os.path.dirname(os.path.abspath(__file__))

# Пути к файлам
CALIBRATION_FILE = os.path.join(BASE_DIR, "calibration_data.npz")
CALIBRATION_VIDEO_PATH = ""  # Путь к видео для калибровки (заполняется через GUI)
VIDEO_PATH = ""  # Путь к видео для обработки (заполняется через GUI)
CONFIG_PATH = os.path.join(BASE_DIR, "config.json")
LOG_FILE = os.path.join(BASE_DIR, "error_log.txt")

# Параметры камеры
CAMERA_INDEX = 0  # Индекс камеры по умолчанию (0 - первая камера)

# Параметры отображения
TARGET_WIDTH = 640  # Целевая ширина для отображения
TARGET_HEIGHT_DISPLAY = 480  # Целевая высота для отображения
A4_ASPECT_RATIO = 1.414  # Соотношение сторон листа A4 (297/210)

# Параметры трекинга
MAX_LOST_FRAMES = 10  # Максимальное количество кадров, в течение которых объект может быть потерян
MAX_DISTANCE = 100  # Максимальное расстояние для сопоставления объектов между кадрами

# Параметры калибровки
MAX_CAPTURES = 20  # Максимальное количество кадров для калибровки
FRAME_INTERVAL = 10  # Интервал между кадрами для калибровки
SQUARE_LENGTH = 0.025  # Размер квадрата на доске ChArUco в метрах
MARKER_LENGTH = 0.0125  # Размер маркера на доске ChArUco в метрах
SQUARES_X = 5  # Количество квадратов по горизонтали
SQUARES_Y = 7  # Количество квадратов по вертикали
MIN_CHARUCO_CORNERS = 10  # Минимальное количество углов для калибровки

# Параметры детекции
SCALE = 1.0  # Масштаб для обработки изображения
BLUR_KERNEL = 5  # Размер ядра для размытия (должен быть нечетным)
CANNY_LOW = 50  # Нижний порог для детектора Canny
CANNY_HIGH = 150  # Верхний порог для детектора Canny
MIN_AREA = 1000  # Минимальная площадь контура
MAX_AREA = 100000  # Максимальная площадь контура

# Параметры GUI
BOTTOM_HEIGHT = 100  # Высота нижней панели для интерфейса выбора формы/цвета

# Режимы работы
MODE_CALIBRATION = "calibration"  # Режим калибровки
MODE_DATA_COLLECTION = "data_collection"  # Режим сбора данных
MODE_ANALYSIS = "analysis"  # Режим анализа
MODE_WORKING = "working"  # Рабочий режим

# Параметры для сохранения данных
CSV_DIRECTORY = os.path.join(BASE_DIR, "data")
os.makedirs(CSV_DIRECTORY, exist_ok=True)  # Создаем директорию, если она не существует
